<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Type Scanning Diagnostics | Lamar</title>
    <meta name="description" content=".NET Fast Inversion of Control and Dynamic code weaving tools">
    <link rel="stylesheet" href="/lamar/assets/style.5189d035.css">
    <link rel="modulepreload" href="/lamar/assets/Home.48453dc5.js">
    <link rel="modulepreload" href="/lamar/assets/AlgoliaSearchBox.3ea63e75.js">
    <link rel="modulepreload" href="/lamar/assets/app.21b67795.js">
    <link rel="modulepreload" href="/lamar/assets/guide_ioc_diagnostics_type-scanning.md.3b311267.lean.js">
    <link rel="modulepreload" href="/lamar/assets/app.21b67795.js">
    <meta name="twitter:title" content="Type Scanning Diagnostics | Lamar">
    <meta property="og:title" content="Type Scanning Diagnostics | Lamar">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/lamar/" aria-label="Lamar, back to home" data-v-7161a24b data-v-4a583abe><!----> Lamar</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/lamar/guide/" data-v-641633f9>Guide <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar/releases" target="_blank" rel="noopener noreferrer" data-v-641633f9>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://gitter.im/JasperFx/lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank" rel="noopener noreferrer" data-v-641633f9>Gitter | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/lamar/guide/" data-v-641633f9>Guide <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar/releases" target="_blank" rel="noopener noreferrer" data-v-641633f9>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://gitter.im/JasperFx/lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank" rel="noopener noreferrer" data-v-641633f9>Gitter | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/">Getting Started</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/">Inversion of Control</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/concepts">Software Design Concepts</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/bootstrapping">Bootstrapping a Container</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/aspnetcore">Integration with ASP.NET Core</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/blazor">Integration with Blazor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/">Registration</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/registry-dsl">ServiceRegistry DSL</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/inline-dependencies">Inline Dependencies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/auto-registration-and-conventions">Auto-Registration and Conventions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/configured-instance">Working with IConfiguredInstance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/policies">Policies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/changing-configuration-at-runtime">Changing Configuration at Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/constructor-selection">Constructor Selection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/existing-objects">Registering Existing Objects</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/attributes">Using Attributes for Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/overrides">Overriding Service Registrations</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lifetime">Service Lifetimes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/">Resolving Services</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-a-service-by-service-type">Get a Service by Service Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-a-service-by-service-type-and-name">Get a Service by Service Type and Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-all-services-by-service-type">Get all Services by Service Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/try-getting-an-optional-service-by-service-type">Try Getting an Optional Service by Service Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/try-getting-an-optional-service-by-service-type-and-name">Try Getting an Optional Service by Service Type and Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/requesting-a-concrete-type">Auto Resolving Concrete Types</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/generics">Generic Types</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/decorators">Decorators, Interceptors, and Activators</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/">Lamar Diagnostics</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/what-do-i-have">WhatDoIHave()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/validating-container-configuration">Validating Container Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/environment-tests">Environment Tests</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/build-plans">Build Plans</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/using-the-container-model">Using the Container Model</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/lamar/guide/ioc/diagnostics/type-scanning">Type Scanning Diagnostics</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#assert-for-assembly-loading-failures">Assert for Assembly Loading Failures</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#what-did-lamar-scan">What did Lamar scan?</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/auto-wiring">Auto Wiring</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lambdas">Building Objects with Lambdas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/injecting-at-runtime">Injecting Services at Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/disposing">Lamar and IDisposable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lazy-resolution">Lazy Resolution</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/nested-containers">Nested Containers (Per Request/Transaction)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/setter-injection">Setter Injection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/working-with-enumerable-types">Working with Enumerable Types</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/">Compilation</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/assembly-generator">Compiling code with AssemblyGenerator</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/source-writer">Generating code with ISourceWriter</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/">The &quot;Frame&quot; Model</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/variables">Working with Variables</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/frame">Building custom Frames</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/extension-methods">Extension methods for Names in code</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/injected-fields">Injected Fields</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="type-scanning-diagnostics"><a class="header-anchor" href="#type-scanning-diagnostics" aria-hidden="true">#</a> Type Scanning Diagnostics</h1><p>Type scanning and conventional auto-registration is a very powerful feature in Lamar, but it has been frequently troublesome to users when things go wrong. To try to alleviate problems, Lamar has some functionality for detecting and diagnosing problems with type scanning, mostly related to Assembly&#39;s being missing.</p><h2 id="assert-for-assembly-loading-failures"><a class="header-anchor" href="#assert-for-assembly-loading-failures" aria-hidden="true">#</a> Assert for Assembly Loading Failures</h2><p>At its root, most type scanning and auto-registration schemes in .Net frameworks rely on the <a href="https://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexportedtypes%28v=vs.110%29.aspx" target="_blank" rel="noopener noreferrer">Assembly.GetExportedTypes()</a> method. Unfortunately, that method can be brittle and fail whenever any dependency of that Assembly cannot be loaded into the current process, even if your application has no need for that dependency. In Lamar, you can use this method to assert the presence of any assembly load exceptions during type scanning:</p><!-- snippet: sample_assert-no-type-scanning-failures --><p><a id="snippet-sample_assert-no-type-scanning-failures"></a></p><div class="language-cs"><pre><code>TypeRepository<span class="token punctuation">.</span><span class="token function">AssertNoTypeScanningFailures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/Scanning/TypeRepositoryTester.cs#L45-L47" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_assert-no-type-scanning-failures" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>The method above will throw an exception listing all the Assembly&#39;s that failed during the call to <code>GetExportedTypes()</code> only if there were any failures. Use this method during your application bootstrapping if you want it to fail fast with any type scanning problems.</p><h2 id="what-did-lamar-scan"><a class="header-anchor" href="#what-did-lamar-scan" aria-hidden="true">#</a> What did Lamar scan?</h2><p>Confusion of type scanning has been a constant problem with Lamar usage over the years -- especially if users are trying to dynamically load assemblies from the file system for extensibility. In order to see into what Lamar has done with type scanning, 4.0 introduces the <code>Container.WhatDidIScan()</code> method.</p><p>Let&#39;s say that you have a <code>Container</code> that is set up with at least two different scanning operations like this sample from the Lamar unit tests:</p><!-- snippet: sample_whatdidiscan --><p><a id="snippet-sample_whatdidiscan"></a></p><div class="language-cs"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token function">RegisterConcreteTypesAgainstTheFirstInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token function">SingleImplementationsOfInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Give your scanning operation a descriptive name</span>
        <span class="token comment">// to help the diagnostics to be more useful</span>
        x<span class="token punctuation">.</span>Description <span class="token operator">=</span> <span class="token string">&quot;Second Scanner&quot;</span><span class="token punctuation">;</span>

        x<span class="token punctuation">.</span><span class="token function">AssembliesFromApplicationBaseDirectory</span><span class="token punctuation">(</span>assem <span class="token operator">=&gt;</span> assem<span class="token punctuation">.</span>FullName<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;Widget&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token function">ConnectImplementationsToTypesClosing</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IService<span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddAllTypesOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span><span class="token function">WhatDidIScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Diagnostics/WhatDidIScan_smoke_tests.cs#L21-L46" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_whatdidiscan" title="Start of snippet">anchor</a></sup><a id="snippet-sample_whatdidiscan-1"></a></p><div class="language-cs"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token function">RegisterConcreteTypesAgainstTheFirstInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token function">SingleImplementationsOfInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Give your scanning operation a descriptive name</span>
        <span class="token comment">// to help the diagnostics to be more useful</span>
        x<span class="token punctuation">.</span>Description <span class="token operator">=</span> <span class="token string">&quot;Second Scanner&quot;</span><span class="token punctuation">;</span>

        x<span class="token punctuation">.</span><span class="token function">AssembliesFromApplicationBaseDirectory</span><span class="token punctuation">(</span>assem <span class="token operator">=&gt;</span> assem<span class="token punctuation">.</span>FullName<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;Widget&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token function">ConnectImplementationsToTypesClosing</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IService<span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddAllTypesOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span><span class="token function">WhatDidIScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/WhatDidIScan_smoke_tester.cs#L14-L39" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_whatdidiscan-1" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>The resulting textual report is shown below:</p><p><em>Sorry for the formatting and color of the text, but the markdown engine does <strong>not</strong> like the textual report</em><!-- snippet: sample_whatdidiscan-result --><a id="snippet-sample_whatdidiscan-result"></a></p><div class="language-cs"><pre><code><span class="token comment">/*
All Scanners
================================================================
Scanner #1
Assemblies
----------
* StructureMap.Testing, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null

Conventions
--------
* Default I[Name]/[Name] registration convention
* Register all concrete types against the first interface (if any) that they implement
* Register any single implementation of any interface against that interface

Second Scanner
Assemblies
----------
* StructureMap.Testing.GenericWidgets, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget2, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget3, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget4, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget5, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null

Conventions
--------
* Connect all implementations of open generic type IService&lt;T&gt;
* Find and register all types implementing StructureMap.Testing.Widget.IWidget

*/</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Diagnostics/WhatDidIScan_smoke_tests.cs#L90-L121" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_whatdidiscan-result" title="Start of snippet">anchor</a></sup><a id="snippet-sample_whatdidiscan-result-1"></a></p><div class="language-cs"><pre><code><span class="token comment">/*
All Scanners
================================================================
Scanner #1
Assemblies
----------
* StructureMap.Testing, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null

Conventions
--------
* Default I[Name]/[Name] registration convention
* Register all concrete types against the first interface (if any) that they implement
* Register any single implementation of any interface against that interface

Second Scanner
Assemblies
----------
* StructureMap.Testing.GenericWidgets, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget2, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget3, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget4, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null
* StructureMap.Testing.Widget5, Version=4.0.0.51243, Culture=neutral, PublicKeyToken=null

Conventions
--------
* Connect all implementations of open generic type IService&lt;T&gt;
* Find and register all types implementing StructureMap.Testing.Widget.IWidget

*/</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/WhatDidIScan_smoke_tester.cs#L43-L74" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_whatdidiscan-result-1" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>The textual report will show:</p><ol><li>All the scanning operations (calls to <code>Registry.Scan()</code>) with a descriptive name, either one supplied by you or the <code>Registry</code> type and an order number.</li><li>All the assemblies that were part of the scanning operation including the assembly name, version, and a warning if <code>Assembly.GetExportedTypes()</code> failed on that assembly.</li><li>All the configured scanning conventions inside of the scanning operation</li></ol><p><code>WhatDidIScan()</code> does not at this time show any type filters or exclusions that may be part of the assembly scanner.</p><p>See also: <a href="/guide/ioc/registration/auto-registration-and-conventions.html">Auto-Registration and Conventions</a></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/JasperFx/lamar/edit/master/docs/guide/ioc/diagnostics/type-scanning.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Suggest changes to this page <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/lamar/guide/ioc/diagnostics/using-the-container-model" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Using the Container Model</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/lamar/guide/ioc/auto-wiring" data-v-38ede35f><span class="text" data-v-38ede35f>Auto Wiring</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"21c8165b\",\"guide_index.md\":\"f5cf0bd1\",\"guide_compilation_assembly-generator.md\":\"a7f9768b\",\"guide_compilation_index.md\":\"508f9f1f\",\"guide_compilation_source-writer.md\":\"9a80aff0\",\"guide_ioc_aspnetcore.md\":\"5455d959\",\"guide_ioc_auto-wiring.md\":\"00357b08\",\"guide_ioc_blazor.md\":\"1d00962f\",\"guide_ioc_bootstrapping.md\":\"13dda372\",\"guide_ioc_concepts.md\":\"c450b170\",\"guide_ioc_decorators.md\":\"fabdd25e\",\"guide_ioc_disposing.md\":\"e742a693\",\"guide_ioc_generics.md\":\"51b716ad\",\"guide_ioc_index.md\":\"7085ef56\",\"guide_ioc_injecting-at-runtime.md\":\"cdd5602c\",\"guide_ioc_lambdas.md\":\"f6034342\",\"guide_ioc_lazy-resolution.md\":\"1b941b3b\",\"guide_ioc_lifetime.md\":\"4f885d39\",\"guide_ioc_nested-containers.md\":\"060c864b\",\"guide_ioc_setter-injection.md\":\"b4b3af0d\",\"guide_ioc_working-with-enumerable-types.md\":\"d5c1fc81\",\"guide_compilation_frames_extension-methods.md\":\"174a362c\",\"guide_compilation_frames_frame.md\":\"e923afc7\",\"guide_compilation_frames_index.md\":\"06b3bf18\",\"guide_compilation_frames_injected-fields.md\":\"7db2f0dd\",\"guide_compilation_frames_variables.md\":\"d2365dce\",\"guide_ioc_diagnostics_build-plans.md\":\"b9f9445f\",\"guide_ioc_diagnostics_environment-tests.md\":\"829d1471\",\"guide_ioc_diagnostics_index.md\":\"3d1b79e6\",\"guide_ioc_diagnostics_type-scanning.md\":\"3b311267\",\"guide_ioc_diagnostics_using-the-container-model.md\":\"c13778cf\",\"guide_ioc_diagnostics_validating-container-configuration.md\":\"ae572237\",\"guide_ioc_diagnostics_what-do-i-have.md\":\"5feaa3e9\",\"guide_ioc_registration_attributes.md\":\"e2c58536\",\"guide_ioc_registration_auto-registration-and-conventions.md\":\"b73ac625\",\"guide_ioc_registration_changing-configuration-at-runtime.md\":\"af453770\",\"guide_ioc_registration_configured-instance.md\":\"4dacb260\",\"guide_ioc_registration_constructor-selection.md\":\"e7c0baee\",\"guide_ioc_registration_existing-objects.md\":\"0d1e0a78\",\"guide_ioc_registration_index.md\":\"6faeaef2\",\"guide_ioc_registration_inline-dependencies.md\":\"e720f4bd\",\"guide_ioc_registration_overrides.md\":\"5fc4c1ca\",\"guide_ioc_registration_policies.md\":\"7c0a17a1\",\"guide_ioc_registration_registry-dsl.md\":\"06bd7459\",\"guide_ioc_resolving_get-a-service-by-plugin-type-and-name.md\":\"d916341a\",\"guide_ioc_resolving_get-a-service-by-service-type.md\":\"38e56531\",\"guide_ioc_resolving_get-all-services-by-service-type.md\":\"c6b1226f\",\"guide_ioc_resolving_index.md\":\"7f7f538b\",\"guide_ioc_resolving_requesting-a-concrete-type.md\":\"9c446e86\",\"guide_ioc_resolving_try-getting-an-optional-service-by-service-type-and-name.md\":\"70a3ad85\",\"guide_ioc_resolving_try-getting-an-optional-service-by-service-type.md\":\"034efc01\"}")</script>
    <script type="module" async src="/lamar/assets/app.21b67795.js"></script>
  </body>
</html>